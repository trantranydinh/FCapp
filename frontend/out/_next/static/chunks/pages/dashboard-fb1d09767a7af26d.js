(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(9052)}])},316:function(e,r,a){"use strict";a.d(r,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var s=a(5893),t=a(7294),l=a(4819);let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("rounded-2xl border bg-card text-card-foreground shadow-sm",a),...t})});i.displayName="Card";let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});c.displayName="CardTitle";let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})});o.displayName="CardDescription";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",a),...t})});d.displayName="CardContent",t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"},1568:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});let s=(0,a(1462).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7372:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});let s=(0,a(1462).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9052:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return N}});var s=a(5893),t=a(9008),l=a.n(t),i=a(1298),n=a(7294),c=a(1163),o=a(316),d=a(7202),m=a(7711),x=a(979),u=a(7372),h=a(1462);let p=(0,h.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var f=a(7553);let g=(0,h.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var b=a(1568);let y=[{value:"",label:"Select Origin"},{value:"tanzania",label:"Tanzania"},{value:"ghana",label:"Ghana"},{value:"IVC",label:"IVC"},{value:"cambodia",label:"Cambodia"},{value:"vietnam",label:"Vietnam"},{value:"nigeria",label:"Nigeria"},{value:"benin",label:"Benin"},{value:"india",label:"India"},{value:"bissau",label:"Bissau"},{value:"conakry",label:"Conakry"},{value:"senegal",label:"Senegal"},{value:"indonesia",label:"Indonesia"}];var j=()=>{let e=(0,c.useRouter)(),[r,t]=(0,n.useState)({origin:"",rcnCfr:"",qualityKor:""}),[l,i]=(0,n.useState)({}),[h,j]=(0,n.useState)(null),[N,v]=(0,n.useState)(!1),[C,k]=(0,n.useState)([]),[w,_]=(0,n.useState)(!1),[Z,q]=(0,n.useState)(!1),[K,R]=(0,n.useState)(""),[P,O]=(0,n.useState)({key:"timestamp",direction:"desc"}),S=C.filter(e=>{if(!K)return!0;let r=K.toLowerCase();return e.origin&&e.origin.toLowerCase().includes(r)||e.rcn_cfr&&e.rcn_cfr.toString().includes(r)||e.quality_kor&&e.quality_kor.toString().includes(r)}).sort((e,r)=>{if(!P.key)return 0;let a=e[P.key],s=r[P.key];return a<s?"asc"===P.direction?-1:1:a>s?"asc"===P.direction?1:-1:0}),F=e=>{let r="asc";P.key===e&&"asc"===P.direction&&(r="desc"),O({key:e,direction:r})};(0,n.useEffect)(()=>{e.asPath.includes("history")?w||(q(!0),Promise.all([a.e(66),a.e(365)]).then(a.bind(a,7365)).then(e=>{let{api:r}=e;r.get("/api/v1/parity/history?limit=20").then(e=>{k((e.data.data||[]).map(e=>({...e,timestamp:e.timestamp||e.calculatedAt||e.time||e.created_at||e.calculation_timestamp,rcn_cfr:e.rcn_cfr||e.rcnCfr||e.rcnPrice||e.rcncfr,quality_kor:e.quality_kor||e.qualityKor||e.kor||e.qualitykor,price_per_lbs:e.price_per_lbs||e.priceCkLb}))),_(!0)}).catch(e=>console.error("Failed to load history",e)).finally(()=>q(!1))})):w&&_(!1)},[e.asPath,w]);let z=()=>{e.push(w?"/dashboard":"/dashboard#history",void 0,{shallow:!0})},L=()=>{let e={};r.origin||(e.origin="Please select an origin");let a=parseFloat(r.rcnCfr);!r.rcnCfr||isNaN(a)?e.rcnCfr="Please enter a valid RCN price":(a<1e3||a>2500)&&(e.rcnCfr="Kindly enter the RCN price correctly.");let s=parseFloat(r.qualityKor);return!r.qualityKor||isNaN(s)?e.qualityKor="Please enter a valid KOR value":(s<40||s>60)&&(e.qualityKor="Kindly enter the KOR (lbs/bag) correctly."),i(e),0===Object.keys(e).length},T=(e,r)=>{t(a=>({...a,[e]:r})),l[e]&&i(r=>({...r,[e]:""}))},E=async()=>{var e,s,t;if(L()){v(!0),j(null);try{let{api:s}=await Promise.all([a.e(66),a.e(365)]).then(a.bind(a,7365)),t=await s.post("/api/v1/parity/calculate",r);j({priceCkLb:t.data.priceCkLb,priceCkKg:t.data.priceCkKg,origin:null===(e=y.find(e=>e.value===r.origin))||void 0===e?void 0:e.label,rcnCfr:r.rcnCfr,qualityKor:r.qualityKor})}catch(e){i({general:(null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Calculation failed. Please try again."})}finally{v(!1)}}};return(0,s.jsx)("div",{className:"space-y-6",children:w?(0,s.jsxs)(o.Zb,{className:"glass-card border-none animate-in fade-in slide-in-from-bottom-4",children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(d.z,{variant:"ghost",size:"sm",onClick:z,className:"-ml-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 mr-1"})," Back"]}),(0,s.jsx)(o.ll,{children:"Calculation History"})]}),(0,s.jsx)("div",{className:"relative w-64",children:(0,s.jsx)("input",{type:"text",placeholder:"Search history...",value:K,onChange:e=>R(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-primary focus:ring-2 focus:outline-none bg-white dark:bg-slate-800 text-sm"})})]}),(0,s.jsx)(o.aY,{children:Z?(0,s.jsx)("div",{className:"text-center py-4",children:"Loading history..."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"text-xs text-muted-foreground uppercase bg-secondary/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 cursor-pointer hover:text-primary transition-colors",onClick:()=>F("timestamp"),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Time","timestamp"===P.key&&("asc"===P.direction?(0,s.jsx)(g,{className:"h-4 w-4"}):(0,s.jsx)(b.Z,{className:"h-4 w-4"}))]})}),(0,s.jsx)("th",{className:"px-4 py-3 cursor-pointer hover:text-primary transition-colors",onClick:()=>F("origin"),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["Origin","origin"===P.key&&("asc"===P.direction?(0,s.jsx)(g,{className:"h-4 w-4"}):(0,s.jsx)(b.Z,{className:"h-4 w-4"}))]})}),(0,s.jsx)("th",{className:"px-4 py-3 cursor-pointer hover:text-primary transition-colors",onClick:()=>F("rcn_cfr"),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["RCN Price","rcn_cfr"===P.key&&("asc"===P.direction?(0,s.jsx)(g,{className:"h-4 w-4"}):(0,s.jsx)(b.Z,{className:"h-4 w-4"}))]})}),(0,s.jsx)("th",{className:"px-4 py-3 cursor-pointer hover:text-primary transition-colors",onClick:()=>F("quality_kor"),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["KOR","quality_kor"===P.key&&("asc"===P.direction?(0,s.jsx)(g,{className:"h-4 w-4"}):(0,s.jsx)(b.Z,{className:"h-4 w-4"}))]})}),(0,s.jsx)("th",{className:"px-4 py-3 text-right cursor-pointer hover:text-primary transition-colors",onClick:()=>F("price_per_lbs"),children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Price (Ck/lb)","price_per_lbs"===P.key&&("asc"===P.direction?(0,s.jsx)(g,{className:"h-4 w-4"}):(0,s.jsx)(b.Z,{className:"h-4 w-4"}))]})})]})}),(0,s.jsx)("tbody",{children:S.length>0?S.map((e,r)=>(0,s.jsxs)("tr",{className:"border-b border-border/50 hover:bg-secondary/20",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:new Date(e.timestamp||e.calculatedAt||e.time||e.created_at||e.calculation_timestamp).toLocaleString()}),(0,s.jsx)("td",{className:"px-4 py-3 capitalize",children:e.origin}),(0,s.jsxs)("td",{className:"px-4 py-3",children:["$",e.rcn_cfr||e.rcnCfr||e.rcnPrice||e.rcncfr]}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.quality_kor||e.qualityKor||e.kor||e.qualitykor}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right font-medium text-primary",children:["$",Number(e.price_per_lbs||e.priceCkLb).toFixed(2)]})]},r)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"5",className:"px-4 py-8 text-center text-muted-foreground",children:"No history found."})})})]})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Zb,{className:"bg-card border border-border shadow-none",children:(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-primary"}),"Parity Tool"]}),(0,s.jsx)(o.SZ,{children:"Calculate Price Ck/lb based on RCN CFR and Quality KOR"})]}),(0,s.jsxs)(d.z,{variant:"ghost",size:"sm",onClick:z,className:"gap-2 text-muted-foreground hover:text-primary",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4"}),"Detail"]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(o.Zb,{className:"bg-card border border-border shadow-none",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{className:"text-lg",children:"Input Parameters"})}),(0,s.jsxs)(o.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Origin ",(0,s.jsx)("span",{className:"text-accent",children:"*"})]}),(0,s.jsx)("select",{value:r.origin,onChange:e=>T("origin",e.target.value),className:"w-full px-4 py-2.5 rounded-lg border ".concat(l.origin?"border-accent focus:ring-accent":"border-slate-300 focus:ring-primary"," focus:ring-2 focus:outline-none transition-all bg-white dark:bg-slate-800"),children:y.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),l.origin&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-accent flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),l.origin]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["RCN CFR ($/MT) ",(0,s.jsx)("span",{className:"text-accent",children:"*"})]}),(0,s.jsx)("input",{type:"number",value:r.rcnCfr,onChange:e=>T("rcnCfr",e.target.value),placeholder:"1000 - 2500",step:"0.01",className:"w-full px-4 py-2.5 rounded-lg border ".concat(l.rcnCfr?"border-accent focus:ring-accent":"border-slate-300 focus:ring-primary"," focus:ring-2 focus:outline-none transition-all bg-white dark:bg-slate-800")}),l.rcnCfr&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-accent flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),l.rcnCfr]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Quality KOR (lbs/bag) ",(0,s.jsx)("span",{className:"text-accent",children:"*"})]}),(0,s.jsx)("input",{type:"number",value:r.qualityKor,onChange:e=>T("qualityKor",e.target.value),placeholder:"40 - 60",step:"0.01",className:"w-full px-4 py-2.5 rounded-lg border ".concat(l.qualityKor?"border-accent focus:ring-accent":"border-slate-300 focus:ring-primary"," focus:ring-2 focus:outline-none transition-all bg-white dark:bg-slate-800")}),l.qualityKor&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-accent flex items-center gap-1",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),l.qualityKor]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),(0,s.jsx)("textarea",{value:r.notes||"",onChange:e=>T("notes",e.target.value),placeholder:"Add any notes here...",className:"w-full px-4 py-2.5 rounded-lg border border-slate-300 focus:ring-primary focus:ring-2 focus:outline-none transition-all bg-white dark:bg-slate-800 resize-none h-20"})]}),l.general&&(0,s.jsx)("div",{className:"p-3 bg-accent/10 border border-accent rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-accent flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),l.general]})}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsx)(d.z,{onClick:E,disabled:N,className:"flex-1 bg-primary hover:bg-primary/90 text-white",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Calculating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Calculate"]})}),(0,s.jsx)(d.z,{onClick:()=>{t({origin:"",rcnCfr:"",qualityKor:""}),i({}),j(null)},variant:"outline",className:"border-slate-300",children:"Reset"})]})]})]}),(0,s.jsxs)(o.Zb,{className:"bg-card border border-border shadow-none",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{className:"text-lg",children:"Calculation Result"})}),(0,s.jsx)(o.aY,{children:h?(0,s.jsxs)("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,s.jsxs)("div",{className:"p-6 bg-gradient-to-br from-primary/5 to-accent/5 rounded-xl border-2 border-primary/20 flex flex-col items-center text-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(p,{className:"h-6 w-6 text-success"}),(0,s.jsx)("p",{className:"text-base font-medium text-muted-foreground",children:"Parity Price (Ck/lb)"})]}),(0,s.jsxs)("p",{className:"text-4xl font-bold text-primary",children:["$",null!==h.priceCkLb&&void 0!==h.priceCkLb?h.priceCkLb.toFixed(2):"0.00"]})]})}),(0,s.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Input Summary"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Origin"}),(0,s.jsx)("span",{className:"font-medium",children:h.origin})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"RCN CFR"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",h.rcnCfr,"/MT"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Quality KOR"}),(0,s.jsxs)("span",{className:"font-medium",children:[h.qualityKor," lbs/bag"]})]})]})]})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,s.jsx)(m.Z,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Enter parameters and click Calculate",(0,s.jsx)("br",{}),"to see the result"]})]})})]})]})]})})},N=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"Parity Tool | Intersnack Cashew"})}),(0,s.jsx)(i.Z,{title:"Parity Tool",children:(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)(j,{})})})]})},9008:function(e,r,a){e.exports=a(7828)}},function(e){e.O(0,[809,298,888,774,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);